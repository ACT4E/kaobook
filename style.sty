\ProvidesPackage{style}

% GEOMETRY {{{

% Golden ratio proportions on crown quarto with marginpar inside
%\RequirePackage[includemp,
			%paperwidth=18.90cm,
			%paperheight=24.58cm,
			%top=2.170cm,
			%bottom=3.510cm,
			%inner=2.1835cm,
			%outer=2.1835cm,
			%marginparwidth=4cm, % Fixed for now
			%marginparsep=0.4cm]{geometry}

% For full bleed printing on crown quarto with 1/8 inch trim margin
% \RequirePackage[includemp,
%             paperwidth=19.54cm,
%             paperheight=25.22cm,
%             % showframe,
%             layoutwidth=18.90cm,
%             layoutheight=24.58cm,
%             layouthoffset=0.32cm,
%             layoutvoffset=0.32cm,
%             top=2.170cm,
%             bottom=3.510cm,
%             inner=2.1835cm,
%             outer=2.1835cm,
%             marginparwidth=4cm, % Fixed for now
%             marginparsep=0.4cm]{geometry}

% For printing on A4
%\usepackage[
	%a4paper,
	%paperwidth=21.0cm,
	%paperheight=29.7cm,
	%%layouthoffset=1.05cm,
	%%layoutvoffset=2.56cm,
	%top=2.620cm,
	%bottom=4.238cm,
	%inner=2.183cm,
	%outer=2.183cm,
	%marginparwidth=4.830cm, % Fixed for now
	%marginparsep=0.483cm,
	%includemp
%]{geometry}

% Tufte geometry
\usepackage[
	a4paper,
	%paperwidth=21.0cm,
	%paperheight=29.7cm,
	top=27.4mm,
	bottom=27.4mm,
	inner=24.8mm,
	%outer=24.8mm,
	%headsep=2\baselineskip,
	textwidth=107mm,
	marginparsep=8.2mm,
	marginparwidth=49.4mm,
	%textheight=49\baselineskip,
	%headheight=\baselineskip,
	includemp,
]{geometry}

\newcommand{\marginpage}{
	\newgeometry{
		top=27.4mm,
		bottom=27.4mm,
		inner=24.8mm,
		%outer=24.8mm,
		%right=2.183cm,
		textwidth=107mm,
		marginparsep=8.2mm,
		marginparwidth=49.4mm,
		%textheight=49\baselineskip,
		includemp
	}
}

\newcommand{\widepage}{
	\newgeometry{
		top=27.4mm,
		bottom=27.4mm,
		inner=24.8mm,
		outer=24.8mm,
		%right=2.183cm,
		%textwidth=107mm,
		marginparsep=0mm,
		marginparwidth=0mm,
		%textheight=49\baselineskip,
		ignoremp,
	}
}

%\newcommand{\marginpage}{
	%\newgeometry{
		%top=2.620cm,
		%bottom=4.238cm,
		%inner=2.183cm,
		%outer=2.183cm,
		%marginparwidth=4.830cm,
		%marginparsep=0.483cm,
		%includemp
	%}
%}

%\newcommand{\widepage}{
	%\newgeometry{
		%top=2.620cm,
		%bottom=4.238cm,
		%inner=2.1835cm,
		%outer=2.1835cm,
		%marginparwidth=0cm,
		%marginparsep=0cm,
		%ignoremp
	%}
%}

\newcommand{\fullwidthpage}{
	\newgeometry{
		top=0cm,
		bottom=0cm,
		inner=0cm,
		outer=0cm,
		marginparwidth=0cm,
		marginparsep=0cm,
		ignoremp
	}
}

% }}}

% ENCODING & FONTS {{{

\RequirePackage{ifxetex}

\ifxetex
  \RequirePackage{polyglossia}			% Correct hyphenation
  \setdefaultlanguage{italian}
  \RequirePackage[english=british]{csquotes}	% English quotes
  \RequirePackage{fontspec}				% Selecting fonts

  \geometry{xetex}
  \hypersetup{xetex}

  \RequirePackage{mathpazo}
  %\RequirePackage{fourier}
  \RequirePackage[scaled=.95]{helvet}
  \RequirePackage{beramono}

  %\setmainfont{texgyrepagella-regular.otf}[
	%Ligatures=TeX,
	%Numbers=Lining,
	%BoldFont=texgyrepagella-bold.otf,
	%ItalicFont=texgyrepagella-italic.otf,
	%BoldItalicFont=texgyrepagella-bolditalic.otf,
  %]
  %\setmonofont{Nimbus Mono PS}[
	%%Path=../fonts/,
	%Scale=MatchLowercase,
	%%BoldFont=CourierPrime-Bold,
	%%ItalicFont=CourierPrime-Italic,
	%%BoldItalicFont=CourierPrime-BoldItalic,
  %]

  %\newfontfamily\fanciestfont[
	%%Path=../fonts/,
	%Ligatures={TeX,Discretionary},
	%%Scale=MatchLowerCase,
  %]{Cantarell}
  %\newfontfamily\fancyfont[
	%%Path=../fonts/,
	%Ligatures=TeX,
  %]{Cantarell}
  %\newfontfamily\chapternumberfont[
	%%Path=../fonts/,
	%Ligatures=TeX,
	%Numbers=Lining
  %]{Cantarell}

  %\addtokomafont{disposition}{\fancyfont}
  %\addtokomafont{part}{\Huge}
  %\addtokomafont{title}{\fanciestfont}
  %\addtokomafont{chapter}{\fanciestfont}
  %\addtokomafont{chapterentry}{\normalfont\scshape}
  %\addtokomafont{descriptionlabel}{\normalfont\bfseries}
  %\addtokomafont{caption}{\footnotesize}

\else
  \RequirePackage[english]{babel}	% Load characters and hyphenation
  \RequirePackage[T1]{fontenc}		% utf8 encoding in the output (.pdf) file
  \RequirePackage[utf8]{inputenc}	% utf8 encoding in the input (.tex) file
  \RequirePackage[english=british]{csquotes}	% English quotes

  %\RequirePackage{fourier}
  \usepackage{mathpazo}
  %\usepackage{Baskervaldx}
  \usepackage[scaled]{helvet}
  %\usepackage{avant}
  %\usepackage{courier} % monospace font
  \usepackage[scaled=.85]{beramono} % monospace font
  \usepackage[cal=boondoxo]{mathalfa} % mathcal from STIX, unslanted a 
  %bit
  \usepackage[cmintegrals,bigdelims,vvarbb]{newtxmath} % 
  %\usepackage[baskervaldx,cmintegrals,bigdelims,vvarbb]{newtxmath} % 
  %math italic letters from Baskervaldx

  %\addtokomafont{disposition}{\rmfamily\normalfont\itshape}
  %\addtokomafont{title}{\normalfont\itshape}
  %\addtokomafont{part}{\fontfamily{pplx}\selectfont\itshape\bfseries}
  \addtokomafont{part}{\normalfont\scshape\bfseries}
  \addtokomafont{chapter}{\normalfont\itshape\bfseries}
  \addtokomafont{section}{\normalfont\itshape\bfseries}
  \addtokomafont{subsection}{\normalfont\itshape\bfseries}
  \addtokomafont{subsubsection}{\normalfont\itshape\bfseries}
  \addtokomafont{paragraph}{\normalfont\itshape\bfseries}
  \addtokomafont{partentry}{\normalfont\scshape\bfseries}
  \addtokomafont{chapterentry}{\normalfont\bfseries}
  %\setkomafont{descriptionlabel}{\small}
  %\addtokomafont{caption}{\footnotesize}
  %\makeatletter
  %\addtokomafont{captionlabel}{\@margin@par}
  %\makeatother

  \setstretch{1.10}

\fi

% }}}

% COLOURS {{{

%\addtokomafont{title}{\color{Maroon}}
%\addtokomafont{part}{\color{Maroon}}
%\addtokomafont{chapter}{\color{Maroon}}
%\addtokomafont{section}{\color{Maroon}}
%\addtokomafont{subsection}{\color{Maroon}}
%\addtokomafont{subsubsection}{\color{Maroon}}
%\addtokomafont{paragraph}{\color{Maroon}}
%\addtokomafont{captionlabel}{\color{DarkBlue}}
%\addtokomafont{pagenumber}{\color{Maroon}}

\hypersetup{
	%anchorcolor=Red,
	%citecolor=DarkOrange!70!black,
	citecolor=Black,
	%filecolor=Red,
	%linkcolor=DarkBlue,
	linkcolor=Black,
	%menucolor=Red,
	%runcolor=Red,
	urlcolor=DarkGreen,
}

% }}}

% TOC, LOF AND LOT {{{

\RequirePackage{tocbasic}
\setuptoc{toc}{totoc}
% Levels in table of contents
\setcounter{tocdepth}{\subsectiontocdepth}

% List of figures title as "Figures"
\renewcaptionname{english}{\contentsname}{Contents}
\renewcaptionname{english}{\listfigurename}{Figures}
\renewcaptionname{english}{\listtablename}{Tables}
\newcaptionname{english}{\listtheoremname}{Theorems}

\DeclareTOCStyleEntry[level=1,indent=0em,numwidth=2em]%
{tocline}{figure}
\DeclareTOCStyleEntry[level=1,indent=0em,numwidth=2em]%
{tocline}{table}

% Table of contents styles
%\newlength{\alignviiilength}
%\setlength{\alignviiilength}{7.5mm}
%\newlength{\alignxlength}
%\setlength{\alignxlength}{8.5mm}
%\renewcommand{\cftdotsep}{\cftnodots}
%\renewcommand{\cftpnumalign}{l}

%\setlength{\cftpartnumwidth}{\alignviiilength}
%\renewcommand{\cftpartfont}{\LARGE\hypersetup{allcolors=black}}
%\renewcommand{\cftpartpagefont}{\LARGE}

%\setlength{\cftchapnumwidth}{\alignviiilength}
%\renewcommand{\cftchapfont}{\large\hypersetup{allcolors=black}}
%% \renewcommand{\cftchapleader}{\hspace{1em}}
%\renewcommand{\cftchappagefont}{\large}
%% \renewcommand{\cftchapafterpnum}{\cftparfillskip}

%\setlength{\cftsecnumwidth}{\alignviiilength}
%\renewcommand{\cftsecfont}{\hypersetup{allcolors=black}}
%\setlength{\cftsecindent}{\alignviiilength}
%\renewcommand{\cftsecleader}{\hspace{1em}}
%% \renewcommand{\cftsecpagefont}{\normalfont\color{greenforlinks}}
%\renewcommand{\cftsecafterpnum}{\cftparfillskip}

%\setlength{\cftfigindent}{0mm}
%\renewcommand{\cftfigfont}{\hypersetup{allcolors=black}}
%\setlength{\cftfignumwidth}{\alignxlength}
%\renewcommand{\cftfigleader}{\hspace{1em}}
%\renewcommand{\cftfigafterpnum}{\cftparfillskip}

%\setlength{\cfttabindent}{0mm}
%\setlength{\cfttabnumwidth}{\alignxlength}
%\renewcommand{\cfttabfont}{\hypersetup{allcolors=black}}
%\renewcommand{\cfttableader}{\hspace{1em}}
%\renewcommand{\cfttabafterpnum}{\cftparfillskip}

% }}}
